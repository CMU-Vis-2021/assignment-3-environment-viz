import{m as U,s as y,o as j,l as N,c as D,j as O,i as Z,b as M,a as E,d as Y,e as z,f as W}from"./vendor.050cab8a.js";const P=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function d(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=d(e);fetch(e.href,r)}};P();var w=650,F=400,k=450,R=250,c={top:20,right:30,bottom:100,left:130},v="2000",q=["Debris and open burning","Arson/incendiarism","Equipment and vehicle use","Recreation and ceremony","Misuse of fire by a minor","Smoking","Railroad operations and maintenance","Power generation/transmission/distribution","Fireworks","Other causes","Firearms and explosives use","Missing data/not specified/undetermined"],H=["#ff0000","#ff8000","#ffff00","#80ff00","#00ff00","#00ff80","#00ffff","#0080ff","#0000ff","#8000ff","#ff00ff","#ff0080"],T=1,h=26e4,x=U().center([-96,37]).scale(588).translate([w/2,F/2]),g=y("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),i=y("#my_dataviz").append("svg").attr("width",w).attr("height",F),G=j().domain(q).range(H),o=N().domain([T,h]).range([2,25]);D("assets/firesfinaldata.csv").then(b=>{O("assets/geojson/USA.geojson").then(function(u){i.append("g").selectAll("path").data(u.features).enter().append("path").attr("fill","#b8b8b8").attr("d",Z().projection(x)).style("stroke","black").style("opacity",.3),i.selectAll("myCircles").data(b).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles "+t.VALUE+""+t.FIRE_YEAR).attr("cx",function(t){return x([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return x([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return o(t.FIRE_SIZE)}).style("fill",function(t){return G(t.NWCG_GENERAL_CAUSE)}).attr("stroke",function(t){return G(t.NWCG_GENERAL_CAUSE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",function(t,n){g.style("opacity",1),g.style("display","block")}).on("mousemove",function(t,n){g.html("Fire year: "+n.FIRE_YEAR+"<br>Acres burned: "+n.FIRE_SIZE+"<br>Cause of fire: "+n.NWCG_GENERAL_CAUSE+"<br>State: "+n.STATE+"<br>County: "+n.FIPS_NAME).style("left",t.x+30+"px").style("top",t.y-30+"px")}).on("mouseleave",function(t,n){g.style("opacity",0),g.style("display","none")});var d=y("#my_dataviz").append("svg").attr("width",k+c.left+c.right).attr("height",R+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")"),s=N().range([0,k]);const e=d.append("g").attr("transform","translate(0,"+R+")");var r=M().range([0,R]).padding(.1);const f=d.append("g");function S(t){let n=b.filter(function(a){return a.FIRE_YEAR==t});r.domain(n.map(function(a){return a.NWCG_GENERAL_CAUSE})),f.transition().duration(1e3).call(Y(r)),s.domain([0,z(n,function(a){return a.FIRE_SIZE})]),e.transition().duration(1e3).call(W(s));var l=d.selectAll("rect").data(n);l.join("rect").transition().duration(1e3).attr("class",function(a){return"fire"+a.FIRE_SIZE}).attr("x",s(0)).attr("y",a=>r(a.NWCG_GENERAL_CAUSE)).attr("width",a=>s(a.FIRE_SIZE)).attr("height",r.bandwidth()).attr("fill","#efa768")}S(2e3);function I(){E(".slider").each(function(t){let l=y(this).property("value"),a="year"+l;v=l,S(v);let C=document.getElementsByClassName("button");for(let p=0;p<=C.length-1;p++)C[p].classList.remove("active");i.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),i.selectAll("."+a).transition().duration(1e3).style("opacity",1).attr("r",function(p){return o(p.FIRE_SIZE)})})}function B(){E(".button").each(function(t){let l=y(this).property("value");console.log(this.classList.contains("active")),this.classList.contains("active")!=!0?(console.log("NOT SELECTED"),i.selectAll("."+l+""+v).transition().duration(1e3).style("opacity",0).attr("r",0)):(console.log("SELECTED"),i.selectAll("."+l+""+v).transition().duration(1e3).style("opacity",1).attr("r",function(a){return o(a.FIRE_SIZE)}))})}E(".slider").on("change",I),E(".button").on("click",B),I();var A=[T,h/2,h],_=50,L=100,m=380;i.selectAll("legend").data(A).enter().append("circle").attr("cx",_).attr("cy",function(t){return m-o(t)}).attr("r",function(t){return o(t)}).style("fill","none").attr("stroke","black"),i.selectAll("legend").data(A).enter().append("line").attr("x1",function(t){return _+o(t)}).attr("x2",L).attr("y1",function(t){return m-o(t)*1.5}).attr("y2",function(t){return m-o(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),i.selectAll("legend").data(A).enter().append("text").attr("x",L).attr("y",function(t){return m-o(t)*1.5}).text(function(t){return t==h?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});var K=document.getElementById("yearShown");myRange.oninput=function(){K.innerHTML=this.value};
