const D=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}};D();var E=650,A=400,L=1,p=26e4,g=["Debris and open burning","Arson/incendiarism","Equipment and vehicle use","Recreation and ceremony","Misuse of fire by a minor","Smoking","Railroad operations and maintenance","Power generation/transmission/distribution","Fireworks","Other causes","Firearms and explosives use"],y=d3.geoMercator().center([-96,37]).scale(588).translate([E/2,A/2]),k=new Date("2000-01-01"),I=new Date("2018-12-31"),v=d3.timeFormat("%Y"),T=d3.timeFormat("%b %Y");d3.timeParse("%m/%d/%y");var o=d3.scaleTime().domain([k,I]).range([0,600]).clamp(!0);d3.csv("assets/firedata.csv").then(h=>{d3.json("assets/geojson/USA.geojson").then(function(s){var l=d3.scaleOrdinal().domain(g).range(d3.schemeSet2),i=d3.select("#legend").append("svg").attr("width",300).attr("height",300);i.selectAll("legenddots").data(g).enter().append("circle").attr("cx",10).attr("cy",function(t,e){return 10+e*25}).attr("r",7).style("fill",function(t){return l(t)}),i.selectAll("legendlabels").data(g).enter().append("text").attr("x",25).attr("y",function(t,e){return 10+e*25}).style("fill",function(t){return l(t)}).text(function(t){return t}).attr("text-anchor","left").style("alignment-baseline","middle");var r=d3.select("#slider").append("svg").attr("width",650).attr("height",50),a=r.append("g").attr("class","slider").attr("transform","translate("+10+","+50/4+")");a.append("line").attr("class","track").attr("x1",o.range()[0]).attr("x2",o.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-overlay").call(d3.drag().on("start.interrupt",function(){a.interrupt()}).on("start drag",function(){w(o.invert(d3.event.x))})),a.append("g",".track-overlay").attr("class","ticks").attr("transform","translate(0,"+18+")").selectAll("text").data(o.ticks(10)).enter().append("text").attr("x",o).attr("y",10).attr("text-anchor","middle").text(function(t){return v(t)});var c=a.insert("circle",".track-overlay").attr("class","handle").attr("r",9),N=a.append("text").attr("class","label").attr("text-anchor","middle").text(T(k)).attr("transform","translate(0,"+-25+")"),f=d3.select("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");const C=function(t,e){f.style("opacity",1)};var R=function(t,e){f.html("Acres burned: "+e.FIRE_SIZE+"<br>Longitude: "+e.LONGITUDE+"<br>Latitude: "+e.LATITUDE+"<br>Cause of fire: "+e.NWCG_GENERAL_CAUSE).style("left",t.x+30+"px").style("top",t.y-30+"px")},S=function(t,e){f.style("opacity",0)},d=d3.select("#my_dataviz").append("svg").attr("width",E).attr("height",A),n=d3.scaleLinear().domain([L,p]).range([2,25]);d.append("g").selectAll("path").data(s.features).enter().append("path").attr("fill","#b8b8b8").attr("d",d3.geoPath().projection(y)).style("stroke","black").style("opacity",.3);function w(t){c.attr("cx",o(t)),N.attr("x",o(t)),console.log(v(t)),v(t),d.selectAll("myCircles").data(h.slice(150,1340)).enter().append("circle").attr("class",e=>e.NWCG_GENERAL_CAUSE).attr("cx",function(e){return y([e.LONGITUDE,e.LATITUDE])[0]}).attr("cy",function(e){return y([e.LONGITUDE,e.LATITUDE])[1]}).attr("r",function(e){return n(e.FIRE_SIZE)}).style("fill",function(e){return l(e.NWCG_GENERAL_CAUSE)}).attr("stroke",function(e){return l(e.NWCG_GENERAL_CAUSE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",C).on("mousemove",R).on("mouseleave",S)}var m=[L,p/2,p],x=50,b=100,u=380;d.selectAll("legend").data(m).enter().append("circle").attr("cx",x).attr("cy",function(t){return u-n(t)}).attr("r",function(t){return n(t)}).style("fill","none").attr("stroke","black"),d.selectAll("legend").data(m).enter().append("line").attr("x1",function(t){return x+n(t)}).attr("x2",b).attr("y1",function(t){return u-n(t)*1.5}).attr("y2",function(t){return u-n(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),d.selectAll("legend").data(m).enter().append("text").attr("x",b).attr("y",function(t){return u-n(t)*1.5}).text(function(t){return t==p?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});
