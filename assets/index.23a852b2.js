import{m as Z,c as V,j as z,s as p,o as Y,l as T,i as G,b as M,a as v,d as q,e as H,f as P}from"./vendor.050cab8a.js";const K=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(e){if(e.ep)return;e.ep=!0;const a=l(e);fetch(e.href,a)}};K();var k=650,U=400,F=450,_=250,c={top:20,right:30,bottom:100,left:130},h="2000",D=1,E=26e4,I=Z().center([-96,37]).scale(588).translate([k/2,U/2]);V("assets/firedata.csv").then(x=>{z("assets/geojson/USA.geojson").then(function(u){console.log("IN HERE");var l=p("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");const f=function(t,o){l.style("opacity",1),l.style("display","block")};var e=function(t,o){l.html(o.FIRE_SIZE+"<br>Category: "+o.CAUSE__ABRV+"<br>long: "+o.LONGITUDE+"<br>lat: "+o.LATITUDE).style("left",t.x+30+"px").style("top",t.y-30+"px")},a=function(t,o){l.style("opacity",0),l.style("display","none")},n=p("#my_dataviz").append("svg").attr("width",k).attr("height",U),R=Y().domain(["arson_incendiarism","debris_and_open_burning","equipment_and_vehicle_use","power_generation","recreation_and_ceremony"]).range(["#F5CBA7","#EB984E","#E67E22","#A04000","#6E2C00"]),i=T().domain([D,E]).range([2,25]);n.append("g").selectAll("path").data(u.features).enter().append("path").attr("fill","#b8b8b8").attr("d",G().projection(I)).style("stroke","black").style("opacity",.3),console.log(markers),n.selectAll("myCircles").data(x).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles "+t.CAUSE__ABRV+""+t.FIRE_YEAR).attr("cx",function(t){return I([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return I([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return i(t.FIRE_SIZE)}).style("fill",function(t){return R(t.CAUSE__ABRV)}).attr("stroke",function(t){return R(t.CAUSE__ABRV)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",f).on("mousemove",e).on("mouseleave",a);var b=p("#my_dataviz").append("svg").attr("width",F+c.left+c.right).attr("height",_+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")"),y=T().range([0,F]);const N=b.append("g").attr("transform","translate(0,"+_+")");var g=M().range([0,_]).padding(.1);const j=b.append("g");function S(t){let o=markers.filter(function(r){return r.FIRE_YEAR==t});g.domain(o.map(function(r){return r.CAUSE__ABRV})),j.transition().duration(1e3).call(q(g)),y.domain([0,H(o,function(r){return r.FIRE_SIZE})]),N.transition().duration(1e3).call(P(y));var s=b.selectAll("rect").data(o);s.join("rect").transition().duration(1e3).attr("class",function(r){return"fire"+r.FIRE_SIZE}).attr("x",y(0)).attr("y",r=>g(r.CAUSE__ABRV)).attr("width",r=>y(r.FIRE_SIZE)).attr("height",g.bandwidth()).attr("fill","#efa768")}S(2e3);function B(){v(".slider").each(function(t){let s=p(this).property("value"),r="year"+s;h=s,S(h);let w=document.getElementsByClassName("button");for(let d=0;d<=w.length-1;d++)w[d].classList.remove("active");n.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),n.selectAll("."+r).transition().duration(1e3).style("opacity",1).attr("r",function(d){return i(d.FIRE_SIZE)})})}function O(){v(".button").each(function(t){let s=p(this).property("value");console.log(this.classList.contains("active")),this.classList.contains("active")!=!0?(console.log("NOT SELECTED"),n.selectAll("."+s+""+h).transition().duration(1e3).style("opacity",0).attr("r",0)):(console.log("SELECTED"),n.selectAll("."+s+""+h).transition().duration(1e3).style("opacity",1).attr("r",function(r){return i(r.FIRE_SIZE)}))})}v(".slider").on("change",B),v(".button").on("click",O),B();var A=[D,E/2,E],L=50,C=100,m=380;n.selectAll("legend").data(A).enter().append("circle").attr("cx",L).attr("cy",function(t){return m-i(t)}).attr("r",function(t){return i(t)}).style("fill","none").attr("stroke","black"),n.selectAll("legend").data(A).enter().append("line").attr("x1",function(t){return L+i(t)}).attr("x2",C).attr("y1",function(t){return m-i(t)*1.5}).attr("y2",function(t){return m-i(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),n.selectAll("legend").data(A).enter().append("text").attr("x",C).attr("y",function(t){return m-i(t)*1.5}).text(function(t){return t==E?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});var J=document.getElementById("yearShown");myRange.oninput=function(){J.innerHTML=this.value};
