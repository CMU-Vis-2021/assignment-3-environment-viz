import{m as j,s as E,o as G,l as w,c as D,j as O,i as Z,b as Y,a as m,d as z,e as V,f as M}from"./vendor.050cab8a.js";const P=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function y(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=y(r);fetch(r.href,a)}};P();var F=650,N=400,T=450,L=250,d={top:20,right:30,bottom:100,left:130},f="2000",W=["#7c0202","#b64d24","#b86213","#e18820","#de9b10","#f3c523","#7c5201","#fac45a","#0000ff","#8000ff","#ff00ff","#ff0080"],q=["0","1","2","3","4","5","6","7","8","9","10","11"],U=1,b=26e4,R=j().center([-96,37]).scale(588).translate([F/2,N/2]),h=E("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),o=E("#my_dataviz").append("svg").attr("width",F).attr("height",N),A=G().domain(q).range(W),l=w().domain([U,b]).range([2,25]);D("assets/firesfinaldata.csv").then(x=>{O("assets/geojson/USA.geojson").then(function(p){o.append("g").selectAll("path").data(p.features).enter().append("path").attr("fill","#b8b8b8").attr("d",Z().projection(R)).style("stroke","black").style("opacity",.3),o.selectAll("myCircles").data(x).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles val"+t.VALUE+""+t.FIRE_YEAR).attr("cx",function(t){return R([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return R([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return l(t.FIRE_SIZE)}).style("fill",function(t){return A(t.VALUE)}).attr("stroke",function(t){return A(t.VALUE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",function(t,n){h.style("opacity",1),h.style("display","block")}).on("mousemove",function(t,n){h.html("Fire year: "+n.FIRE_YEAR+"<br>Acres burned: "+n.FIRE_SIZE+"<br>Cause of fire: "+n.NWCG_GENERAL_CAUSE+"<br>State: "+n.STATE+"<br>County: "+n.FIPS_NAME).style("left",t.x+30+"px").style("top",t.y-30+"px")}).on("mouseleave",function(t,n){h.style("opacity",0),h.style("display","none")});var y=E("#my_dataviz").append("svg").attr("width",T+d.left+d.right).attr("height",L+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")"),s=w().range([0,T]);const r=y.append("g").attr("transform","translate(0,"+L+")");var a=Y().range([0,L]).padding(.1);const g=y.append("g");function S(t){let n=x.filter(function(e){return e.FIRE_YEAR==t});a.domain(n.map(function(e){return e.NWCG_GENERAL_CAUSE})),g.transition().duration(1e3).call(z(a)),s.domain([0,V(n,function(e){return e.FIRE_SIZE})]),r.transition().duration(1e3).call(M(s));var i=y.selectAll("rect").data(n);i.join("rect").transition().duration(1e3).attr("class",function(e){return"fire"+e.FIRE_SIZE}).attr("x",s(0)).attr("y",e=>a(e.NWCG_GENERAL_CAUSE)).attr("width",e=>s(e.FIRE_SIZE)).attr("height",a.bandwidth()).style("fill",function(e){return A(e.VALUE)}).attr("stroke",function(e){return A(e.VALUE)}).attr("stroke-width",3).attr("fill-opacity",.4)}S(2e3);function _(){m(".slider").each(function(t){let i=E(this).property("value"),e="year"+i;f=i,S(f);let c=document.getElementsByClassName("button");for(let u=0;u<=c.length-1;u++)c[u].classList.remove("active");o.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),o.selectAll("."+e).transition().duration(1e3).style("opacity",1).attr("r",function(u){return l(u.FIRE_SIZE)})})}function B(t){m(".checkbox").each(function(n){let i=E(this);console.log(i);let e=i.property("value"),c="val"+e;console.log("group"),console.log(c),console.log("map year"),console.log(f),i.property("checked")?(console.log("SELECTED","."+c+""+f),o.selectAll("."+c+""+f).transition().duration(1e3).style("opacity",1).attr("r",function(u){return l(u.FIRE_SIZE)})):(console.log("NOT SELECTED"),o.selectAll("."+c+""+f).transition().duration(1e3).style("opacity",0).attr("r",0))})}m(".slider").on("change",_),m(".checkbox").on("change",B),_();var I=[U,b/2,b],C=50,k=100,v=380;o.selectAll("legend").data(I).enter().append("circle").attr("cx",C).attr("cy",function(t){return v-l(t)}).attr("r",function(t){return l(t)}).style("fill","none").attr("stroke","black"),o.selectAll("legend").data(I).enter().append("line").attr("x1",function(t){return C+l(t)}).attr("x2",k).attr("y1",function(t){return v-l(t)*1.5}).attr("y2",function(t){return v-l(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),o.selectAll("legend").data(I).enter().append("text").attr("x",k).attr("y",function(t){return v-l(t)*1.5}).text(function(t){return t==b?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});var H=document.getElementById("yearShown");myRange.oninput=function(){H.innerHTML=this.value};
