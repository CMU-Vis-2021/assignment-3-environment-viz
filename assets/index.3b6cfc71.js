import{m as j,s as v,o as G,l as k,c as D,j as O,i as Z,b as Y,a as E,d as z,e as M,f as P}from"./vendor.050cab8a.js";const V=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function y(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=y(e);fetch(e.href,r)}};V();var w=650,F=400,N=450,I=250,u={top:20,right:30,bottom:100,left:130},d="2000",W=["#ff0000","#ff8000","#ffff00","#80ff00","#00ff00","#00ff80","#00ffff","#0080ff","#0000ff","#8000ff","#ff00ff","#ff0080"],q=["0","1","2","3","4","5","6","7","8","9","10","11"],T=1,b=26e4,R=j().center([-96,37]).scale(588).translate([w/2,F/2]),h=v("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),o=v("#my_dataviz").append("svg").attr("width",w).attr("height",F),B=G().domain(q).range(W),l=k().domain([T,b]).range([2,25]);D("assets/firesfinaldata.csv").then(A=>{O("assets/geojson/USA.geojson").then(function(p){o.append("g").selectAll("path").data(p.features).enter().append("path").attr("fill","#b8b8b8").attr("d",Z().projection(R)).style("stroke","black").style("opacity",.3),o.selectAll("myCircles").data(A).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles val"+t.VALUE+""+t.FIRE_YEAR).attr("cx",function(t){return R([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return R([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return l(t.FIRE_SIZE)}).style("fill",function(t){return B(t.VALUE)}).attr("stroke",function(t){return B(t.VALUE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",function(t,n){h.style("opacity",1),h.style("display","block")}).on("mousemove",function(t,n){h.html("Fire year: "+n.FIRE_YEAR+"<br>Acres burned: "+n.FIRE_SIZE+"<br>Cause of fire: "+n.NWCG_GENERAL_CAUSE+"<br>State: "+n.STATE+"<br>County: "+n.FIPS_NAME).style("left",t.x+30+"px").style("top",t.y-30+"px")}).on("mouseleave",function(t,n){h.style("opacity",0),h.style("display","none")});var y=v("#my_dataviz").append("svg").attr("width",N+u.left+u.right).attr("height",I+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")"),s=k().range([0,N]);const e=y.append("g").attr("transform","translate(0,"+I+")");var r=Y().range([0,I]).padding(.1);const g=y.append("g");function S(t){let n=A.filter(function(a){return a.FIRE_YEAR==t});r.domain(n.map(function(a){return a.NWCG_GENERAL_CAUSE})),g.transition().duration(1e3).call(z(r)),s.domain([0,M(n,function(a){return a.FIRE_SIZE})]),e.transition().duration(1e3).call(P(s));var i=y.selectAll("rect").data(n);i.join("rect").transition().duration(1e3).attr("class",function(a){return"fire"+a.FIRE_SIZE}).attr("x",s(0)).attr("y",a=>r(a.NWCG_GENERAL_CAUSE)).attr("width",a=>s(a.FIRE_SIZE)).attr("height",r.bandwidth()).attr("fill","#efa768")}S(2e3);function L(){E(".slider").each(function(t){let i=v(this).property("value"),a="year"+i;d=i,S(d);let c=document.getElementsByClassName("button");for(let f=0;f<=c.length-1;f++)c[f].classList.remove("active");o.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),o.selectAll("."+a).transition().duration(1e3).style("opacity",1).attr("r",function(f){return l(f.FIRE_SIZE)})})}function U(t){E(".checkbox").each(function(n){let i=v(this);console.log(i);let a=i.property("value"),c="val"+a;console.log("group"),console.log(c),console.log("map year"),console.log(d),i.property("checked")?(console.log("SELECTED","."+c+""+d),o.selectAll("."+c+""+d).transition().duration(1e3).style("opacity",1).attr("r",function(f){return l(f.FIRE_SIZE)})):(console.log("NOT SELECTED"),o.selectAll("."+c+""+d).transition().duration(1e3).style("opacity",0).attr("r",0))})}E(".slider").on("change",L),E(".checkbox").on("change",U),L();var x=[T,b/2,b],_=50,C=100,m=380;o.selectAll("legend").data(x).enter().append("circle").attr("cx",_).attr("cy",function(t){return m-l(t)}).attr("r",function(t){return l(t)}).style("fill","none").attr("stroke","black"),o.selectAll("legend").data(x).enter().append("line").attr("x1",function(t){return _+l(t)}).attr("x2",C).attr("y1",function(t){return m-l(t)*1.5}).attr("y2",function(t){return m-l(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),o.selectAll("legend").data(x).enter().append("text").attr("x",C).attr("y",function(t){return m-l(t)*1.5}).text(function(t){return t==b?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});var H=document.getElementById("yearShown");myRange.oninput=function(){H.innerHTML=this.value};
