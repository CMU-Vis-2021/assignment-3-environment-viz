const S=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}};S();var D=650,R=400,T=1,p=26e4,m=["Debris and open burning","Arson/incendiarism","Equipment and vehicle use","Recreation and ceremony","Misuse of fire by a minor","Smoking","Railroad operations and maintenance","Power generation/transmission/distribution","Fireworks","Other causes","Firearms and explosives use","Missing data/not specified/undetermined"],y=d3.geoMercator().center([-96,37]).scale(588).translate([D/2,R/2]),w=new Date("2000-01-01"),C=new Date("2018-12-31"),v=d3.timeFormat("%Y"),_=d3.timeFormat("%b %Y");d3.timeParse("%m/%d/%y");var s=d3.scaleTime().domain([w,C]).range([0,600]).clamp(!0),g=d3.scaleOrdinal().domain(m).range(["#ff0000","#ff8000","#ffff00","#80ff00","#00ff00","#00ff80","#00ffff","#0080ff","#0000ff","#8000ff","#ff00ff","#ff0080"]),h=2e3,G=d3.select("#slider").append("svg").attr("width",650).attr("height",50),d=G.append("g").attr("class","slider").attr("transform","translate("+10+","+50/4+")"),c=d3.scaleLinear().domain([T,p]).range([2,25]),x=d3.select("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),I=d3.select("#legend").append("svg").attr("width",300).attr("height",300);function U(){I.selectAll("legenddots").data(m).enter().append("circle").attr("cx",10).attr("cy",function(n,o){return 10+o*25}).attr("r",7).style("fill",function(n){return g(n)}),I.selectAll("legendlabels").data(m).enter().append("text").attr("x",25).attr("y",function(n,o){return 10+o*25}).style("fill",function(n){return g(n)}).text(function(n){return n}).attr("text-anchor","left").style("alignment-baseline","middle")}U();d3.csv("assets/fire75000causehuman.csv").then(n=>{d3.json("assets/geojson/USA.geojson").then(function(o){var l=d3.select("#my_dataviz").append("svg").attr("width",D).attr("height",R);l.append("g").selectAll("path").data(o.features).enter().append("path").attr("fill","#b8b8b8").attr("d",d3.geoPath().projection(y)).style("stroke","black").style("opacity",.3),d.append("line").attr("class","track").attr("x1",s.range()[0]).attr("x2",s.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-overlay").call(d3.drag().on("start.interrupt",function(){d.interrupt()}).on("start drag",function(){a(s.invert(d3.event.x),n)})),d.append("g",".track-overlay").attr("class","ticks").attr("transform","translate(0,"+18+")").selectAll("text").data(s.ticks(20)).enter().append("text").attr("x",s).attr("y",10).attr("text-anchor","middle").text(function(e){return v(e)});var f=d.insert("circle",".track-overlay").attr("class","handle").attr("r",9),r=d.append("text").attr("class","label").attr("text-anchor","middle").text(_(w)).attr("transform","translate(0,"+-25+")");function a(e,A){f.attr("cx",s(e)),r.attr("x",s(e)),console.log("In the update function"),console.log(v(e)),h=v(e),console.log("Table before filter"),console.log(A.slice(0,15));var L=A.filter(function(t){return t.FIRE_YEAR==h});console.log("Table after filter"),console.log(L.slice(0,15)),console.log("In the DrawData function"),console.log(h);var k=l.selectAll("circle").data(L);k.enter().append("circle").attr("class",t=>t.NWCG_GENERAL_CAUSE).attr("cx",function(t){return y([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return y([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return c(t.FIRE_SIZE)}).style("fill",function(t){return g(t.NWCG_GENERAL_CAUSE)}).attr("stroke",function(t){return g(t.NWCG_GENERAL_CAUSE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",function(t,N){x.style("opacity",1)}).on("mousemove",function(t,N){x.html("Fire year: "+t.DISCOVERY_DATE+"<br>Acres burned: "+t.FIRE_SIZE+"<br>Latitude: "+t.LATITUDE+"<br>Longitude: "+t.LONGITUDE+"<br>State: "+t.STATE+"<br>Cause of fire: "+t.NWCG_GENERAL_CAUSE).style("left",100+"px").style("top",350+"px")}).on("mouseleave",function(t,N){x.style("opacity",0)}),k.exit().remove()}var i=[T,p/2,p],b=50,E=100,u=380;l.selectAll("legend").data(i).enter().append("circle").attr("cx",b).attr("cy",function(e){return u-c(e)}).attr("r",function(e){return c(e)}).style("fill","none").attr("stroke","black"),l.selectAll("legend").data(i).enter().append("line").attr("x1",function(e){return b+c(e)}).attr("x2",E).attr("y1",function(e){return u-c(e)*1.5}).attr("y2",function(e){return u-c(e)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),l.selectAll("legend").data(i).enter().append("text").attr("x",E).attr("y",function(e){return u-c(e)*1.5}).text(function(e){return e==p?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});
