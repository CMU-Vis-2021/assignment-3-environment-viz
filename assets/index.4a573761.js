import{m as Z,j as z,s as f,o as Y,l as k,i as G,a as T,b as M,c as w,d as g,e as P}from"./vendor.ef32592c.js";const q=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))y(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&y(s)}).observe(document,{childList:!0,subtree:!0});function E(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerpolicy&&(e.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?e.credentials="include":r.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function y(r){if(r.ep)return;r.ep=!0;const e=E(r);fetch(r.href,e)}};q();var U=650,F=400,D=450,b=200,c={top:20,right:30,bottom:40,left:130},v="2000",N=1,h=26e4,x=Z().center([-96,37]).scale(588).translate([U/2,F/2]);z("assets/geojson/USA.geojson").then(function(R){console.log("IN HERE");var o=f("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");const E=function(t,a){o.style("opacity",1),o.style("display","block")};var y=function(t,a){o.html(a.FIRE_SIZE+"<br>Category: "+a.CAUSE__ABRV+"<br>long: "+a.LONGITUDE+"<br>lat: "+a.LATITUDE).style("left",t.x+30+"px").style("top",t.y-30+"px")},r=function(t,a){o.style("opacity",0),o.style("display","none")},e=f("#my_dataviz").append("svg").attr("width",U).attr("height",F),s=Y().domain(["arson_incendiarism","debris_and_open_burning","equipment_and_vehicle_use","power_generation","recreation_and_ceremony"]).range(["#F5CBA7","#EB984E","#E67E22","#A04000","#6E2C00"]),l=k().domain([N,h]).range([2,25]);e.append("g").selectAll("path").data(R.features).enter().append("path").attr("fill","#b8b8b8").attr("d",G().projection(x)).style("stroke","black").style("opacity",.3),console.log(markers),e.selectAll("myCircles").data(markers).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles "+t.CAUSE__ABRV+""+t.FIRE_YEAR).attr("cx",function(t){return x([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return x([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return l(t.FIRE_SIZE)}).style("fill",function(t){return s(t.CAUSE__ABRV)}).attr("stroke",function(t){return s(t.CAUSE__ABRV)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",E).on("mousemove",y).on("mouseleave",r);var A=f("#my_dataviz").append("svg").attr("width",D+c.left+c.right).attr("height",b+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")"),d=k().domain([0,54e4]).range([0,D]);const j=A.append("g").attr("transform","translate(0,"+b+")").call(T(d)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var u=M().range([0,b]).domain(markers.map(t=>t.CAUSE__ABRV)).padding(.1);const O=A.append("g").call(w(u));function I(t){console.log("UPDATING BAR");let a=markers.filter(function(n){return n.FIRE_YEAR==t});console.log(a),u.domain(a.map(function(n){return n.CAUSE__ABRV})),O.transition().duration(1e3).call(w(u)),d.domain([0,P(a,function(n){return n.FIRE_SIZE})]),j.transition().duration(1e3).call(T(d));var i=A.selectAll("rect").data(a);i.join("rect").transition().duration(1e3).attr("x",d(0)).attr("y",n=>u(n.CAUSE__ABRV)).attr("width",n=>d(n.FIRE_SIZE)).attr("height",u.bandwidth()).attr("fill","#efa768")}I(2e3);function S(){g(".slider").each(function(t){let i=f(this).property("value"),n="year"+i;v=i,I(v);let L=document.getElementsByClassName("button");for(let p=0;p<=L.length-1;p++)L[p].classList.remove("active");e.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),e.selectAll("."+n).transition().duration(1e3).style("opacity",1).attr("r",function(p){return l(p.FIRE_SIZE)})})}function V(){g(".button").each(function(t){let i=f(this).property("value");console.log(this.classList.contains("active")),this.classList.contains("active")!=!0?(console.log("NOT SELECTED"),e.selectAll("."+i+""+v).transition().duration(1e3).style("opacity",0).attr("r",0)):(console.log("SELECTED"),e.selectAll("."+i+""+v).transition().duration(1e3).style("opacity",1).attr("r",function(n){return l(n.FIRE_SIZE)}))})}g(".slider").on("change",S),g(".button").on("click",V),S();var _=[N,h/2,h],B=50,C=100,m=380;e.selectAll("legend").data(_).enter().append("circle").attr("cx",B).attr("cy",function(t){return m-l(t)}).attr("r",function(t){return l(t)}).style("fill","none").attr("stroke","black"),e.selectAll("legend").data(_).enter().append("line").attr("x1",function(t){return B+l(t)}).attr("x2",C).attr("y1",function(t){return m-l(t)*1.5}).attr("y2",function(t){return m-l(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),e.selectAll("legend").data(_).enter().append("text").attr("x",C).attr("y",function(t){return m-l(t)*1.5}).text(function(t){return t==h?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")});var H=document.getElementById("yearShown");myRange.oninput=function(){H.innerHTML=this.value};
