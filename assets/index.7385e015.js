import{m as G,c as j,j as D,s as p,o as O,l as L,i as Z,b as Y,a as g,d as z,e as M,f as W}from"./vendor.050cab8a.js";const P=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerpolicy&&(e.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?e.credentials="include":r.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(r){if(r.ep)return;r.ep=!0;const e=i(r);fetch(r.href,e)}};P();var N=650,w=400,B=450,A=250,c={top:20,right:30,bottom:100,left:130},m="2000",F=1,h=26e4,b=G().center([-96,37]).scale(588).translate([N/2,w/2]);j("assets/fire5000causehuman.csv").then(_=>{D("assets/geojson/USA.geojson").then(function(u){console.log("IN HERE");var i=p("#my_dataviz").append("div").attr("class","tooltip").style("opacity",0).style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),o=p("#my_dataviz").append("svg").attr("width",N).attr("height",w),r=O().domain(["arson_incendiarism","debris_and_open_burning","equipment_and_vehicle_use","power_generation","recreation_and_ceremony"]).range(["#F5CBA7","#EB984E","#E67E22","#A04000","#6E2C00"]),e=L().domain([F,h]).range([2,25]);o.append("g").selectAll("path").data(u.features).enter().append("path").attr("fill","#b8b8b8").attr("d",Z().projection(b)).style("stroke","black").style("opacity",.3),o.selectAll("myCircles").data(_).enter().append("circle").attr("class",t=>"year"+t.FIRE_YEAR+" dataCircles "+t.NWCG_GENERAL_CAUSE+""+t.FIRE_YEAR).attr("cx",function(t){return b([t.LONGITUDE,t.LATITUDE])[0]}).attr("cy",function(t){return b([t.LONGITUDE,t.LATITUDE])[1]}).attr("r",function(t){return e(t.FIRE_SIZE)}).style("fill",function(t){return r(t.NWCG_GENERAL_CAUSE)}).attr("stroke",function(t){return r(t.NWCG_GENERAL_CAUSE)}).attr("stroke-width",3).attr("fill-opacity",.4).on("mouseover",function(t,n){i.style("opacity",1),i.style("display","block")}).on("mousemove",function(t,n){i.html("Fire year: "+n.FIRE_YEAR+"<br>Acres burned: "+n.FIRE_SIZE+"<br>Cause of fire: "+n.NWCG_GENERAL_CAUSE+"<br>State: "+n.STATE+"<br>County: "+n.FIPS_NAME).style("left",t.x+30+"px").style("top",t.y-30+"px")}).on("mouseleave",function(t,n){i.style("opacity",0),i.style("display","none")});var s=p("#my_dataviz").append("svg").attr("width",B+c.left+c.right).attr("height",A+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")"),f=L().range([0,B]);const T=s.append("g").attr("transform","translate(0,"+A+")");var y=Y().range([0,A]).padding(.1);const k=s.append("g");function R(t){let n=markers.filter(function(a){return a.FIRE_YEAR==t});y.domain(n.map(function(a){return a.CAUSE__ABRV})),k.transition().duration(1e3).call(z(y)),f.domain([0,M(n,function(a){return a.FIRE_SIZE})]),T.transition().duration(1e3).call(W(f));var l=s.selectAll("rect").data(n);l.join("rect").transition().duration(1e3).attr("class",function(a){return"fire"+a.FIRE_SIZE}).attr("x",f(0)).attr("y",a=>y(a.CAUSE__ABRV)).attr("width",a=>f(a.FIRE_SIZE)).attr("height",y.bandwidth()).attr("fill","#efa768")}R(2e3);function I(){g(".slider").each(function(t){let l=p(this).property("value"),a="year"+l;m=l,R(m);let C=document.getElementsByClassName("button");for(let d=0;d<=C.length-1;d++)C[d].classList.remove("active");o.selectAll(".dataCircles").transition().duration(1e3).style("opacity",0).attr("r",0),o.selectAll("."+a).transition().duration(1e3).style("opacity",1).attr("r",function(d){return e(d.FIRE_SIZE)})})}function U(){g(".button").each(function(t){let l=p(this).property("value");console.log(this.classList.contains("active")),this.classList.contains("active")!=!0?(console.log("NOT SELECTED"),o.selectAll("."+l+""+m).transition().duration(1e3).style("opacity",0).attr("r",0)):(console.log("SELECTED"),o.selectAll("."+l+""+m).transition().duration(1e3).style("opacity",1).attr("r",function(a){return e(a.FIRE_SIZE)}))})}g(".slider").on("change",I),g(".button").on("click",U),I();var v=[F,h/2,h],S=50,x=100,E=380;o.selectAll("legend").data(v).enter().append("circle").attr("cx",S).attr("cy",function(t){return E-e(t)}).attr("r",function(t){return e(t)}).style("fill","none").attr("stroke","black"),o.selectAll("legend").data(v).enter().append("line").attr("x1",function(t){return S+e(t)}).attr("x2",x).attr("y1",function(t){return E-e(t)*1.5}).attr("y2",function(t){return E-e(t)*1.5}).attr("stroke","black").style("stroke-dasharray","2,2"),o.selectAll("legend").data(v).enter().append("text").attr("x",x).attr("y",function(t){return E-e(t)*1.5}).text(function(t){return t==h?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}).style("font-size",12).attr("alignment-baseline","middle")})});var q=document.getElementById("yearShown");myRange.oninput=function(){q.innerHTML=this.value};
